$(document).ready(function(){function o(o,e){clearTimeout(alert),alert=setTimeout(function(){$("."+o).removeClass("is-visible").addClass("is-hidden")},e)}function e(o){var e=o.serializeArray(),t={};return $.map(e,function(o,e){t[o.name]=o.value}),t}var t;$(".admin__logout").on("click",function(o){o.preventDefault(),t&&t.abort(),t=$.ajax({url:"logout/logout.php",type:"post"}),t.done(function(o,e,t){1==o&&(window.location.href="login/?status=logout")}),t.fail(function(o,e,t){})}),$(".select_user_registry").change(function(){"ucitel"==$(".select_user_registry").val()?($(".teacher_password").css("display","flex"),$(".groupidcontainer").css("display","none")):($(".teacher_password").css("display","none"),$(".groupidcontainer").css("display","flex"))}).trigger("change"),o("alert__topbar",3e3);var t;$(".js-admin-logout").on("click",function(o){o.preventDefault(),t&&t.abort(),t=$.ajax({url:"../actions/logout.php",type:"post"}),t.done(function(o){1==o?window.location.href="../login/?status=logout":alert("chyba")})}),$(".js-admin-vote").on("click",function(o){o.preventDefault(),t&&t.abort();var e=$(this).closest(".admin__votes__item").attr("data-eventid");t=$.ajax({url:"../actions/vote.php",type:"post",data:{id:e}}),t.done(function(o){$("#modal-space").html(o),$(".vote-modal").modal("show")}),t.fail(function(o,e,t){alert("Chyba. Prosím, kontaktujte správce."),console.log(o),console.log(e),console.log(t)})}),$(document).on("submit","form#vote-form",function(){event.preventDefault(),t&&t.abort();var a=$.now()/1e3,n=e($(this)),s=$(this).closest(".modal").attr("data-eventid");console.log(n),t=$.ajax({url:"../actions/sendVote.php",type:"post",data:{form:n,time:a,eventid:s}}),t.done(function(e){1==e?($(".vote-modal").find(".alert").removeClass("is-visible").addClass("is-hidden"),$(".vote-modal").modal("hide"),$(".alert__topbar").html('Hodnocení úspěšně odesláno. <button type="button" class="close" data-dismiss="alert" aria-label="Close"><i class="fas fa-times"></i></button>').removeClass("is-hidden").addClass("is-visible"),o("alert__topbar",3e3)):($(".vote-modal").find(".alert").removeClass("is-hidden").addClass("is-visible"),console.log(e))}),t.fail(function(o,e,t){alert("Chyba. Prosím, kontaktujte správce."),console.log(o),console.log(e),console.log(t)})})});